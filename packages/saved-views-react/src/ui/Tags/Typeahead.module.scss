/*---------------------------------------------------------------------------------------------
* Copyright (c) Bentley Systems, Incorporated. All rights reserved.
* See LICENSE.md in the project root for license terms and full copyright notice.
*--------------------------------------------------------------------------------------------*/
@import "~@itwin/core-react/lib/cjs/core-react/style/themecolors.scss";

//HACK
// there is an issue in react-select where generated styles have higher
// priority than the class prefix style solution, which we use. I thought
// this was the best solution after testing several, the better of which
// caused an obscure node-sass error
.typeaheadReactSelectWrapper {
  border: 1px solid RGBA(0, 0, 0, 0.15);
  border-radius: 3px;

  :global .react-select {
    $root: &;

    &__control {
      background-color: var(--iui-color-background);
      color: var(--iui-color-text);
      border: 1px solid RGBA(var(--iui-text-color-rgb), 0.25);

      &:hover {
        border: 1px solid RGBA(var(--iui-text-color-rgb), 0.45);
      }

      &[disabled] {
        background-color: var(--iui-color-background-backdrop-hover);
      }

      svg {
        width: unset;
        height: unset;
      }

      &--is-focused {
        box-shadow: none;
      }
    }

    &__single-value {
      color: var(--iui-color-text);
    }

    &__indicator {
      color: var(--iui-color-text);

      &:hover {
        color: RGBA(var(--iui-text-color-rgb), 1);
      }

      &-separator {
        visibility: hidden;
      }
    }

    &__clear-indicator {
      cursor: pointer;
    }

    &__input {
      width: 100% !important;

      input {
        width: 100% !important;
        color: var(--iui-color-text) !important;
      }
    }

    &__placeholder {
      color: RGBA(var(--iui-text-color-rgb), 0.5);

      #{$root}--is-disabled & {
        color: RGBA(var(--iui-text-color-rgb), 0.2);
      }
    }

    &__option {
      // replacing @include iui-line-clamp with what that mixin was setting
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box; /* stylelint-disable-line */
      -webkit-line-clamp: 1;
      -webkit-box-orient: vertical; /* stylelint-disable-line */

      &:active {
        background-color: var(--iui-color-background-backdrop);
      }

      &:hover:not(&--is-selected) {
        background-color: var(--iui-color-background-2);
      }

      &--is-focused:not(&--is-selected) {
        background-color: var(--iui-color-background-2);
      }

      &--is-selected {
        color: var(--iui-color-text);
        background-color: var(--iui-color-background-disabled);

        &:active {
          background-color: var(--iui-color-background-backdrop-hover);
        }
      }
    }

    &__group-heading {
      background-color: var(--iui-color-background-disabled);
      color: var(--iui-color-text);
      height: 100%;
    }
  }

  // Double .react-select__menu intended to be more specific than the inline style.
  :global .react-select__menu.react-select__menu {
    margin-top: 0;
    color: var(--iui-color-text);
    background-color: var(--iui-color-background);
    z-index: 13001 !important;
  }

  // ensure the input area fills available space
  [class^="css-"][class$="-Input"] {
    width: 100%;
  }
}
